---
import Layout from './Default.astro';
import BlogSideBar from '@components/blog/BlogSideBar.astro';
import BlogContent from '@components/blog/BlogContent.astro';
import RecentBlogPosts from '@components/generic/RecentBlogPosts.astro';
import type { CollectionEntry } from 'astro:content';

const ogImage = new URL(`/v1/generate/og/${Astro.params.slug}.png`, Astro.url);

interface Props {
  content:  { [key: string]: any } & {
    author: string | undefined;
    pubDate: string;
    title: string;
    imgUrl: string;
  };
  headings: { depth: number; slug: string; text: string }[];
}

const { content, headings } = Astro.props;
const { title, description } = content;
---

<Layout
  title={title}
  description={description}
  ogImage={ogImage}
>
  <main class='p-6 lg:grid lg:grid-cols-3 flex justify-center'>
    <BlogSideBar headings={headings} />
    <BlogContent content={content}>
      <slot />
    </BlogContent>
  </main>
  <section class='p-6'>
    <RecentBlogPosts count={6} />
  </section>
</Layout>
