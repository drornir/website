---
draft: true
title: "KEDA with custom Prometheus metrics: Intro"
description: >-

date: 2026-01-09
cover:
  image: /covers/KedaAndPrometheus.png
  alt: Data Flowing from servers to Prometheus to KEDA and Back
tags:
  - KEDA
  - Prometheus
  - Kubernetes
  - Metrics
  - Obervability
  - DevOps
---

Kubernetes Event Driven Autoscaling - KEDA - is a K8s operator that is **the**
defacto standard when it comes to enhancing the built in HPA (Horizontal Pod Autoscaler).

Unfortunately for me (and fortunately for you), I recently needed to autoscale
services that were using some old and/or custom tech which didn't come with
easy metrics collection that can drive my autoscaling needs.

It wasn't trivial, but also not that complicated to implemented. So I want to
tell you all how and why I did it and hopefully you'd find parts of it useful
when you need to autoscale your own applications that run on Kubernetes.

In this blog post, I want to briefly explain what I did and I will dive deeper
into the different parts of the solution in follow up posts.

> Let me know on [Bluesky ðŸ¦‹](https://bsky.app/profile/drornir.dev)
> or [Email ðŸ“§](mailto:me@drornir.dev) or a
> [GitHub issue ðŸ±](https://github.com/drornir/website/issues) on this repo
> if you'd like me
> to expand on any of these topics sooner than later!

# Understanding the Problem

The full solution to the problem is (like most SWE problems) a composition of
smaller, self contained solutions to smaller problems that I needed to solve.
Namely,

- Extracting the relevant metrics from the code
- Exposing these metrics as an HTTP endpoint that can be scraped
- Scraping the metrics using Prometheus Operator
- Building Prometheus queries that actually capture the load on a single instance
- Connecting it to KEDA using the app Helm chart

But maybe before I go into explaining each part, it might be beneficial to
understand why simple CPU and Memory based autoscaling wasn't sufficient.

{/*
So I'll explain the context in which I was working with, but it might not be
interesting to people who already know they need this custom stack.

_**Feel free to skip ahead to the next header where I start explaining my solution.**_
*/}
